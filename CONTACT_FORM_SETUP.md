# カスタマーサポート・連絡先設定ガイド

## 概要

RyugakuTalkでは、カスタマーサポートやお問い合わせをGoogleフォームで管理します。このガイドでは、GoogleフォームのURLを設定する方法を説明します。

## 設定手順

### 1. Googleフォームの作成

1. [Googleフォーム](https://docs.google.com/forms)にアクセス
2. 新しいフォームを作成
3. フォームのタイトルを設定：「RyugakuTalk お問い合わせフォーム」など

### 2. フォーム項目の設定

以下の項目を順番に追加してください：

#### 必須項目

1. **お名前**
   - タイプ：短答形式
   - 必須：はい
   - 説明：「お名前をご入力ください」

2. **メールアドレス**
   - タイプ：短答形式
   - 必須：はい
   - 説明：「ご連絡先のメールアドレスをご入力ください」
   - 検証：メールアドレス形式

3. **お問い合わせの種類**
   - タイプ：ラジオボタンまたはドロップダウン
   - 必須：はい
   - 選択肢：
     - バグ報告・不具合
     - 機能要望
     - アカウント関連（ログイン、パスワードリセットなど）
     - 組織アカウントの認証について
     - コミュニティ・イベントについて
     - プライバシー・セキュリティについて
     - その他

4. **お問い合わせ内容**
   - タイプ：段落形式
   - 必須：はい
   - 説明：「詳細をご記入ください。可能であれば、発生している問題の手順やスクリーンショットの情報も含めてください。」

#### 任意項目

5. **ユーザーID（該当する場合）**
   - タイプ：短答形式
   - 必須：いいえ
   - 説明：「アカウントをお持ちの場合は、ユーザーIDをご入力ください。ログインできない場合は空白で構いません。」

6. **スクリーンショット・添付ファイル**
   - タイプ：ファイルアップロード
   - 必須：いいえ
   - 説明：「問題の説明に役立つスクリーンショットやファイルがあれば、こちらに添付してください。」
   - ファイルサイズ制限：10MBまで

7. **緊急度（任意）**
   - タイプ：ラジオボタン
   - 必須：いいえ
   - 選択肢：
     - 通常
     - 高（1-2営業日以内に回答希望）
     - 緊急（セキュリティ関連など）

### 3. フォームの設定

1. **回答の確認メッセージを設定**
   - 右上の「設定」アイコンをクリック
   - 「回答」タブで「回答後に確認メッセージを表示する」を有効化
   - 確認メッセージ例：「お問い合わせありがとうございます。内容を確認の上、3営業日以内にご返信いたします。」

2. **回答の通知設定**
   - 「回答」タブで「新しい回答が送信されたときにメール通知を受け取る」を有効化
   - 通知を受け取るメールアドレスを設定

3. **回答の確認**
   - 「回答」タブで「回答を1件ずつ確認する」を推奨（スプレッドシートに自動保存も可能）

### 4. フォームのURLを取得

1. フォームの右上の「送信」ボタンをクリック
2. 「リンク」アイコンを選択
3. 「URLを短縮」のチェックを外す（完全なURLを取得するため）
4. 表示されたURLをコピー

例：
```
https://docs.google.com/forms/d/e/1FAIpQLSdXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX/viewform
```

### 5. 環境変数の設定

#### 開発環境（.env.local）

プロジェクトのルートディレクトリに `.env.local` ファイルを作成（または既存のファイルを編集）し、以下を追加：

```env
NEXT_PUBLIC_CONTACT_FORM_URL=https://docs.google.com/forms/d/e/1FAIpQLSdXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX/viewform
```

#### 本番環境（Vercel）

1. Vercelダッシュボードにログイン
2. プロジェクトを選択
3. 「Settings」→「Environment Variables」を開く
4. 以下の環境変数を追加：
   - **Name**: `NEXT_PUBLIC_CONTACT_FORM_URL`
   - **Value**: GoogleフォームのURL
   - **Environment**: Production, Preview, Development すべてにチェック
5. 「Save」をクリック
6. 再デプロイを実行（必要に応じて）

## 設定後の動作

環境変数が正しく設定されると、以下の場所でGoogleフォームへのリンクが表示されます：

1. **ホームページ（ランディングページ）**
   - ページ下部の「お問い合わせ・サポート」セクション

2. **フッター**
   - メールアイコンがGoogleフォームへのリンクに変更されます

3. **ヘルプページ**
   - 「まだ解決しませんか？」セクションの「お問い合わせフォーム」ボタン

## 注意事項

- `NEXT_PUBLIC_` で始まる環境変数は、クライアント側でも使用可能です
- 環境変数を変更した場合は、開発サーバーを再起動してください
- 本番環境で変更した場合は、再デプロイが必要です
- GoogleフォームのURLは公開URLである必要があります（限定公開の場合は適切な権限設定が必要です）

## トラブルシューティング

### リンクが表示されない

1. 環境変数が正しく設定されているか確認
2. 環境変数名が `NEXT_PUBLIC_CONTACT_FORM_URL` であることを確認
3. 開発サーバーを再起動
4. ブラウザのキャッシュをクリア

### リンクが機能しない

1. GoogleフォームのURLが正しいか確認
2. フォームが公開されているか確認
3. ブラウザのコンソールでエラーを確認

## 関連ファイル

- `env.example` - 環境変数のテンプレート
- `src/app/page.tsx` - ホームページのカスタマーサポートセクション
- `src/components/Footer.tsx` - フッターの連絡先リンク
- `src/app/help/page.tsx` - ヘルプページのお問い合わせセクション

